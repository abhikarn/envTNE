<div class="position-relative">
  <div class="page-title justify-content-between d-flex align-items-center">
    <h2 class="page-header">Expense - <span> {{this.moduleConfig.pageTitle}} </span></h2>
  </div>
  <!-- <div class="custom-select self-select form-group mb-0 min-w-self  chm-formgroup ">
    <div class="selected  form-control chm-formselect">Self </div>
    <div class="options">
      <div class="text-center  d-block d-lg-none d-md-none d-sm-block">
        <span class="select-mobile-line"></span>
      </div>
      <option class="option" value="182">XXXXX</option>
      <option class="option" value="183">YYYYY</option>
    </div>
  </div> -->

  <!-- <div class="self-select">
  <mat-form-field appearance="fill" class="custom-select  selected form-group mb-0 min-w-self chm-formgroup">
    <mat-label>Self</mat-label>
    <mat-select>
      <mat-option value="182">XXXXX</mat-option>
      <mat-option value="183">YYYYY</mat-option>
    </mat-select>
  </mat-form-field> 
  </div> -->

</div>
<div [formGroup]="expenseRequestForm" class="app-main-wrapper">
  <div class="inn-main-hold">
    <div class="flex-wrapper-top">
      <div class="all-data-wrapper">
        <div class="global-container-hold">
          <div class="left-container-wider scroll-left-align mar-tmd3">
            @if(!this.travelRequestId) {
            @for (box of expenseConfig?.expenseLandingBox; track $index) {
            @if (box?.displayPage?.[moduleConfig.pageTitle]) {
            <div class="common-block mb-3">
              <app-dynamic-form [formConfig]="box.formControls" [displayTable]="box.displayTable"
                [moduleData]="box.moduleData" [existingData]="existingExpenseRequestData"
                [displayAddClearButton]="box.displayAddClearButton" (emitFormValue)="getFormValue($event)"
                (emitDateInputComponentValue)="getDateInputComponentValue($event)" [moduleConfig]="moduleConfig">
              </app-dynamic-form>
            </div>
            }
            }
            }


            @if (expenseConfig?.request && expenseConfig.request?.displayPage[moduleConfig.pageTitle]) {

            @if (!editMode) {
            <div class="common-block mb-3">
              <h6 class="common-title fw-bold mb-3">Linked Request </h6>
              <div class="common-block-mobile">
                <div class="row">
                  <div class="col-md-4">
                    @if (expenseConfig?.request) {
                    <div class="form-group chm-formgroup new-form-grp mb-0 no-hintspace">
                      <!-- <label class="d-block">{{this.expenseConfig.request.label}} </label> -->
                      <!-- Desktop/Tablet: Regular mat-select in mat-form-field -->
                      <ng-container *ngIf="!isMobile; else mobileSelect">
                        <mat-form-field appearance="fill" class="w-100">
                          <mat-select [formControlName]="expenseConfig.request.name" id="ddlTravelExpenseRequest"
                            name="ExpenseRequest" class="chm-formselect"
                            (selectionChange)="onSelectTravelExpenseRequest($event)">
                            <mat-option value="">{{expenseConfig.request.placeholder}}</mat-option>
                            @for (req of travelRequests; track req) {
                            <mat-option [value]="req.value">
                              {{req.label}}
                            </mat-option>
                            }
                          </mat-select>
                        </mat-form-field>
                      </ng-container>
                      <!-- Mobile: Open bottom sheet, input is outside mat-form-field -->
                      <ng-template #mobileSelect>
                        <div>
                          <input class="form-control chm-formselect" [value]="getSelectedRequestLabel()" readonly
                            (click)="openRequestBottomSheet(requestBottomSheet)"
                            placeholder="{{expenseConfig.request.placeholder}}" />
                        </div>
                      </ng-template>
                    </div>
                    }
                  </div>
                </div>
              </div>
            </div>
            } @else {
            @if (expenseRequestData?.travelRequestId) {
            <div class="common-block mb-3">
              <div class="common-block-mobile">
                <div class="row">
                  <div class="col-md-3 col-sm-6 col-lg-2 col-6">
                    <div class="trl-preview-wrapper mb-md-0">
                      <div class="trl-readview-item pb-0">
                        <div class="trl-req-head">
                          <label>Request Number </label>
                        </div>
                        <div class="trl-req-detail">
                          <span> {{expenseRequestData?.travelRequestNumber}}</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            }
            }
            }

            <!-- Travel Details -->
            @if (expenseConfig?.request && expenseConfig.travelDetails?.displayPage[moduleConfig.pageTitle] &&
            this.travelRequestId) {
            <div class="common-block  mb-3">
              <div class="d-flex align-items-center mb-3 justify-content-between">
                <h6 class="common-title fw-bold mb-0">{{ travelDetails?.label || 'Travel Details'}} </h6>
                @if (expenseConfig?.dateExtension?.visible) {
                <div class="date-extension">
                  <button type="button" [class]="expenseConfig.dateExtension.class"
                    [disabled]="!travelRequestId && expenseConfig.request?.displayPage[moduleConfig.pageTitle]"
                    (click)="openModal()">
                    {{ expenseConfig.dateExtension.label }}
                  </button>
                </div>
                }
              </div>
              <div class="common-block-mobile">
                <div class="row">
                  @for (item of travelDetails?.data; track item; let i = $index) {
                  @if (item?.isEnabled) {
                  <div class="col-md-4 col-sm-4 col-lg-4 col-6">
                    <div class="trl-preview-wrapper">
                      <div class="trl-readview-item">
                        <div class="trl-req-head">
                          <label>{{ item.label }}</label>
                        </div>
                        <div class="trl-req-detail">
                          @if (!item.isLink) {
                          @if (item?.controlType === 'autocomplete' && travelRequestId) {
                          <mat-form-field appearance="outline" class="form-field-class">
                            <input matInput [formControl]="billableControl" [matAutocomplete]="auto">
                            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="onOptionSelected($event, item)">
                              <mat-option *ngFor="let option of filteredOptions" [value]="option[item.displayKey]">
                                {{ option[item.displayKey] }}
                              </mat-option>
                            </mat-autocomplete>
                          </mat-form-field>
                          } @else {
                          <span>{{ item.value || '-' }}</span>
                          }
                          }
                          <a *ngIf="item.isLink" href="javascript:void(0)">
                            {{ item.value || '-' }}
                          </a>
                        </div>
                      </div>
                    </div>
                  </div>
                  }
                  }
                </div>
              </div>
            </div>
            }

            <!-- expense category -->
            <div id="expenseCategories" class="expense-core-wrapper"
              [class.disabled]="!travelRequestId && expenseConfig?.request?.displayPage[moduleConfig.pageTitle]">
              <!-- Desktop/Tablet: Show tab grouping logic -->
              <ng-container *ngIf="!isMobile; else mobileTabs">
                <mat-tab-group [(selectedIndex)]="selectedTabIndex" class="expense-tab-sec" fitInkBarToContent="false"
                  (selectedTabChange)="onTabChangeIfAllowed($event)">
                  <!-- Show first 5 categories as tabs -->
                  @for (category of categories.slice(0, 5); track category) {
                  <mat-tab>
                    <ng-template mat-tab-label>
                      <div id="expenseHead">
                        <div class="menu-item">
                          <div class="expense-list-head">
                            <h6> {{category.label}} <span> {{category.count}} </span> </h6>
                          </div>
                        </div>
                      </div>
                    </ng-template>
                    <ng-template matTabContent>
                      <div class="expense-item-hold">
                        <div class="other-sectionaa hidehtgnm" style="display: block;">
                          <div class="common-block mb-3">
                            <h6 class="common-title fw-bold mb-3">{{category.label}}</h6>
                            <div class="common-block-mobile">
                              <app-dynamic-form [moduleData]="travelRequestPreview || this.boxModuleData"
                                [displayTable]="category.displayTable"
                                [displayAddClearButton]="category.displayAddClearButton"
                                [existingData]="existingExpenseRequestData" [category]="category"
                                [formConfig]="category.formControls" [eventHandler]="this"
                                (emitFormData)="getFormData($event)" (emitTextData)="getTextData($event)"
                                (updateData)="updateCategoryData($event)" [moduleConfig]="moduleConfig"
                                [formDisabled]="!travelRequestId && expenseConfig?.request?.displayPage[moduleConfig.pageTitle]">
                              </app-dynamic-form>
                            </div>
                          </div>
                        </div>
                      </div>
                    </ng-template>
                  </mat-tab>
                  }
                  <!-- If more than 5 categories, show the rest in a mat-select as a single tab -->
                  @if (categories.length > 5) {
                  <mat-tab>
                    <ng-template mat-tab-label>
                      <mat-form-field class="more-item" appearance="fill" (click)="$event.stopPropagation()"
                        (mousedown)="$event.stopPropagation()">
                        <mat-select class="more-item-select" placeholder="More" [value]="selectedExtraCategory"
                          (selectionChange)="onExtraCategorySelect($event.value)" panelClass="custom-more-select-panel"
                          [disabled]="!travelRequestId && expenseConfig?.request?.displayPage[moduleConfig.pageTitle]">
                          <mat-option *ngFor="let cat of categories.slice(5)" [value]="cat">
                            {{cat.label}} <span style="font-weight: bold;">{{cat.count}}</span>
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </ng-template>
                    <ng-template matTabContent>
                      <!-- Show the selected extra category's content -->
                      <ng-container *ngIf="selectedExtraCategory">
                        <div class="expense-item-hold">
                          <div class="other-sectionaa hidehtgnm" style="display: block;">
                            <div class="common-block mb-3">
                              <h6 class="common-title fw-bold mb-3">{{selectedExtraCategory.label}}</h6>
                              <div class="common-block-mobile">
                                <app-dynamic-form [moduleData]="travelRequestPreview || this.boxModuleData"
                                  [displayTable]="selectedExtraCategory.displayTable"
                                  [displayAddClearButton]="selectedExtraCategory.displayAddClearButton"
                                  [existingData]="existingExpenseRequestData" [category]="selectedExtraCategory"
                                  [formConfig]="selectedExtraCategory.formControls" [eventHandler]="this"
                                  (emitFormData)="getFormData($event)" (emitTextData)="getTextData($event)"
                                  (updateData)="updateCategoryData($event)" [moduleConfig]="moduleConfig"
                                  [formDisabled]="!travelRequestId && expenseConfig?.request?.displayPage[moduleConfig.pageTitle]">
                                </app-dynamic-form>
                              </div>
                            </div>
                          </div>
                        </div>
                      </ng-container>
                    </ng-template>
                  </mat-tab>
                  }
                </mat-tab-group>
              </ng-container>
              <!-- Mobile: Show all categories as tabs as before -->
              <ng-template #mobileTabs>
                <mat-tab-group class="expense-tab-sec" fitInkBarToContent (selectedTabChange)="onTabChange($event)">
                  @for (category of categories; track category) {
                  <mat-tab>
                    <ng-template mat-tab-label>
                      <div id="expenseHead">
                        <div class="menu-item">
                          <div class="expense-list-head">
                            <h6> {{category.label}} <span> {{category.count}} </span> </h6>
                          </div>
                        </div>
                      </div>
                    </ng-template>
                    <ng-template matTabContent>
                      <div class="expense-item-hold">
                        <div class="other-sectionaa hidehtgnm" style="display: block;">
                          <div class="common-block mb-3">
                            <h6 class="common-title fw-bold mb-3">{{category.label}}</h6>
                            <div class="common-block-mobile">
                              <app-dynamic-form [moduleData]="travelRequestPreview || this.boxModuleData"
                                [displayTable]="category.displayTable"
                                [displayAddClearButton]="category.displayAddClearButton"
                                [existingData]="existingExpenseRequestData" [category]="category"
                                [formConfig]="category.formControls" [eventHandler]="this"
                                (emitFormData)="getFormData($event)" (emitTextData)="getTextData($event)"
                                (updateData)="updateCategoryData($event)" [moduleConfig]="moduleConfig"
                                [formDisabled]="!travelRequestId && expenseConfig?.request?.displayPage[moduleConfig.pageTitle]">
                              </app-dynamic-form>
                            </div>
                          </div>
                        </div>
                      </div>
                    </ng-template>
                  </mat-tab>
                  }
                </mat-tab-group>
              </ng-template>
            </div>
            <!-- Other Details -->
            <div class="row ">
              <div class="col-md-12">
                <div class="tab-scroll-container">
                  <mat-tab-group class="common-tab policy-tab" fitInkBarToContent>
                    @for (detail of expenseConfig?.otherDetails; track detail) {
                    <mat-tab>
                      @switch (detail.name) {
                      @case ("PolicyViolations") {
                      <ng-template mat-tab-label>
                        <span>{{detail.label}}</span>
                      </ng-template>
                      @if (hasAnyViolation) {
                      @for (expenseRequest of expenseRequestData?.dynamicExpenseDetailModels; track $index) {
                      @for (data of expenseRequest.data; track $index) {

                      @if (data?.IsViolation || data?.excludedData?.IsViolation) {
                      <ul class="policy-vio-list mb-0">
                        <li>
                          <span class="fa-pv"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i></span>
                          {{detail[expenseRequest.name]?.label}}: {{data?.Violation || data?.excludedData?.Violation}}
                        </li>
                      </ul>
                      }

                      @if (data?.IsOCRRestrictedKeyword || data?.excludedData?.IsOCRRestrictedKeyword) {
                      <ul class="ocr-vio-list list-unstyled mb-0">
                        <li>
                          <span class="fa-pv"><i class="fa fa-exclamation-triangle text-amber"
                              aria-hidden="true"></i></span>
                          Expense item contains a restricted keyword as identified by OCR validation.
                        </li>
                      </ul>
                      }
                      }
                      }
                      }
                      @else {
                      <div>
                        <span class="text-center d-inline-block w-100 py-2">
                          <svg width="70" height="70" viewBox="0 0 188 184" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2.25436 142.788C1.72125 137.963 0.993173 132.495 3.32057 128.013C4.74626 125.269 6.72033 123.502 9.76362 122.344C11.5214 121.674 13.2212 121.007 15.8319 121.168C13.6842 116.041 11.5944 111.615 12.5388 105.848C13.4161 100.49 16.1274 94.3544 22.8842 94.0498" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M51.377 91.5703C55.3859 92.1156 57.8444 95.823 57.0676 100.846C56.376 105.321 55.4378 111.509 52.8697 115.262C53.6252 112.745 57.6676 111.003 59.5259 112.928C63.1023 116.636 57.7499 127.024 56.2085 130.594C56.4735 130.155 57.3387 129.713 57.7377 129.314C65.7526 135.812 57.8231 151.154 56.1628 158.852C58.4597 154.821 60.7109 155.428 62.4199 157.106C63.873 158.529 65.5089 161.246 65.9232 163.199C66.4441 165.66 67.2027 168.728 67.4464 171.272C67.5499 172.362 67.2027 174.632 66.6605 175.643C65.8837 177.093 64.202 176.642 63.48 175.384C62.2646 173.264 64.3818 168.697 65.3139 166.687C67.2392 162.519 70.2947 157.63 73.6914 154.517C77.347 151.166 82.2211 148.729 86.9064 153.1C88.0092 149.033 91.1194 144.04 92.274 142.484C94.0287 140.123 96.0819 137.914 99.4329 135.477C109.333 137.914 117.263 138.913 122.128 138.691C126.442 138.496 132.333 136.696 136.903 132.735C143.148 134.106 151.221 137.375 157.852 140.976C164.484 144.577 177.011 152.512 186.253 160.457" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M167.975 163.198C161.718 163.271 156.076 163.518 150.002 165.026" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M158.227 161.066C159.384 163.698 159.445 172.033 159.445 172.033" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M161.273 160.152C163.241 162.401 163.092 166.047 163.101 168.987" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M122.889 153.146C121.256 157.41 118.685 164.722 120.699 168.986C122.524 172.855 126.597 171.682 128.982 175.365C130.45 177.635 130.67 180.371 131.117 183" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M97.9092 142.788C101.275 146.998 107.304 153.539 112.836 153.603C118.627 153.67 120.58 148.287 124.108 144.433C126.115 147.574 128.823 152.454 133.262 150.41C137.195 148.598 139.702 141.938 139.644 137.911" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M99.4324 135.477C99.3928 124.077 99.0851 112.58 98.4728 101.099C93.62 100.824 86.8997 102.128 84.2007 97.0958C80.1399 89.5165 88.7824 87.4511 94.8172 87.2988C95.8834 80.5177 98.9937 74.6413 105.952 71.7747C117.238 67.126 130.465 72.981 141.167 76.073C145.335 77.2763 148.948 78.6289 155.055 81.2518C150.882 83.4878 132.379 89.2179 132.379 89.2179C132.379 89.2179 133.658 101.723 134.161 106.536C134.855 113.171 136.902 132.735 136.902 132.735" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M116.492 83.3848L117.406 86.4311" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M121.671 82.7754L122.585 85.5171" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M117.71 96.1787C119.285 98.4787 121.908 98.4208 124.717 97.7019" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M89.3398 93.9121C90.8965 94.0492 92.5476 94.4696 93.9855 94.7925" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M23.2744 97.7022C24.9986 84.801 26.6406 71.2113 29.7479 58.0815C31.6092 50.2068 33.5315 42.332 35.4903 34.4816C36.0112 32.3918 38.6554 19.7708 41.4854 21.6108C44.0779 23.2954 39.8405 36.1205 39.4079 38.7526C39.941 36.943 44.8851 16.7001 48.4828 18.8783C51.9557 20.9833 47.8309 36.7572 47.4105 39.9711C47.4075 37.8569 52.6837 10.7263 58.3103 16.2097C60.4153 18.2629 57.96 25.6228 57.3934 28.0081C56.0895 33.4824 54.4111 38.7587 52.5071 44.0075C53.7531 34.9629 62.8494 26.753 70.8673 34.8654C72.3539 36.3703 76.0187 42.9261 74.4651 45.1651C72.0584 48.6349 69.5726 43.1819 67.1417 41.0404C64.1471 38.4022 60.0863 41.8811 58.6119 44.8452C56.9517 48.184 56.6075 55.1236 57.759 58.7C59.4924 64.092 65.2255 64.2565 68.3724 60.0739C69.3624 58.7609 69.4569 56.8052 70.9496 56.1258C72.6708 55.3429 74.5747 55.7877 75.3089 57.7922C76.7254 61.6701 73.1551 66.8337 69.2771 70.0415C65.3991 73.2462 56.0256 74.0901 51.3647 70.9219C50.8926 77.9863 50.9687 85.0386 50.6945 92.0512C50.597 94.5462 50.4843 95.6337 47.6939 96.2338C44.4374 96.9345 40.206 97.5864 36.6813 98.0038C32.846 98.4546 24.4137 98.3572 23.2775 97.6991L23.2744 97.7022Z" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M25.7109 82.1655C29.6681 82.7139 33.3237 82.1077 37.287 81.87C42.2586 81.5715 46.0483 80.289 50.9955 79.4238" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M104.916 11.7955C102.981 8.47805 99.0668 4.40206 95.4721 3.5765C89.8973 2.29704 84.3957 5.84297 83.4361 11.3386C82.3516 17.547 83.9783 24.3007 85.2669 30.2746C86.1047 34.1647 88.7641 44.3913 88.7641 44.3913C88.7641 44.3913 70.937 48.0012 70.4922 52.0071C70.4922 54.1396 78.6198 52.1138 82.0683 51.7025C89.017 50.8739 96.9039 49.5366 103.85 48.3515C111.615 47.0264 119.029 45.2473 126.697 43.4774C132.473 42.1462 136.747 40.8819 142.386 39.0602C145.307 38.1159 153.727 35.4564 152.743 33.2722C151.759 31.088 143.44 33.5403 140.71 34.0338C135.848 34.9142 127.154 36.1662 127.154 36.1662C124.202 29.2876 122.49 21.425 118.813 14.5281C116.379 9.96161 112.769 1.59941 106.735 1.49888C103.895 1.45014 101.361 3.54301 99.5999 5.72419" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M90.8613 100.922C92.1743 104.425 94.2976 107.523 97.6699 109.656C97.9898 109.86 98.3614 109.869 98.6873 109.744C98.6873 106.862 98.6295 103.98 98.4741 101.099C96.1498 100.968 93.3959 101.196 90.8613 100.919V100.922Z" fill="#333333"/>
<path d="M128.855 66.8276C122.071 67.7994 115.39 65.2923 108.606 65.603C105.873 65.7279 102.824 66.1879 100.63 67.9578C99.0007 69.2708 98.1477 71.2174 98.3975 73.1792C95.9513 73.4138 93.6635 74.742 92.0428 76.6734C89.4961 79.7106 88.9204 83.8292 88.9082 87.6646C88.9082 87.8108 88.9082 87.957 88.9082 88.1032C90.7847 87.5914 92.8593 87.36 94.7023 87.3082C94.9308 88.2525 95.1836 89.1939 95.4273 90.123C96.1036 92.7032 96.9353 95.2225 98.2026 97.5774C98.6626 98.4303 99.8171 98.2993 100.308 97.5774C103.174 93.3582 106.312 88.8374 107.311 83.7318C107.692 81.7791 107.744 79.6253 106.805 77.8097C106.595 77.4014 106.339 77.042 106.056 76.7222C114.461 76.2469 122.674 73.6118 129.796 69.0575C131.027 68.2685 130.18 66.6418 128.858 66.8306L128.855 66.8276Z" fill="#333333"/>
<path d="M117.556 29.7018C117.556 29.7018 121.793 29.1839 123.804 28.9219" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M88.3135 40.8883C98.8203 38.305 109.629 35.8131 120.452 34.3387C121.942 34.1346 124.33 34.1864 125.631 33.4248" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M87.2471 36.7755C90.0802 35.2067 95.2742 33.8206 98.2169 33.123C101.735 32.2913 107.036 31.6272 111.941 30.6768" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                          </svg>
                           <h6 style="font-size: 12px;"> No Data Available </h6>
                        </span>
                      </div>

                        }
                      }

                      @case ("Approvaldetails") {
                      <ng-template mat-tab-label>
                        <span>{{detail.label}}</span>
                      </ng-template>
                      <!-- <table class="table mt-2 color-table mobile-card-view-table">
                        <thead>
                          <tr>
                            <th>Action Date</th>
                            <th>Status</th>
                            <th>Approver Name</th>
                            <th>Remarks</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr class="text-center">
                            <td class="text-center" colspan="4">No Data Available</td>
                          </tr>
                        </tbody>
                      </table> -->
                      <div>
                        <span class="text-center d-inline-block w-100 py-2">
                          <svg width="70" height="70" viewBox="0 0 188 184" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2.25436 142.788C1.72125 137.963 0.993173 132.495 3.32057 128.013C4.74626 125.269 6.72033 123.502 9.76362 122.344C11.5214 121.674 13.2212 121.007 15.8319 121.168C13.6842 116.041 11.5944 111.615 12.5388 105.848C13.4161 100.49 16.1274 94.3544 22.8842 94.0498" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M51.377 91.5703C55.3859 92.1156 57.8444 95.823 57.0676 100.846C56.376 105.321 55.4378 111.509 52.8697 115.262C53.6252 112.745 57.6676 111.003 59.5259 112.928C63.1023 116.636 57.7499 127.024 56.2085 130.594C56.4735 130.155 57.3387 129.713 57.7377 129.314C65.7526 135.812 57.8231 151.154 56.1628 158.852C58.4597 154.821 60.7109 155.428 62.4199 157.106C63.873 158.529 65.5089 161.246 65.9232 163.199C66.4441 165.66 67.2027 168.728 67.4464 171.272C67.5499 172.362 67.2027 174.632 66.6605 175.643C65.8837 177.093 64.202 176.642 63.48 175.384C62.2646 173.264 64.3818 168.697 65.3139 166.687C67.2392 162.519 70.2947 157.63 73.6914 154.517C77.347 151.166 82.2211 148.729 86.9064 153.1C88.0092 149.033 91.1194 144.04 92.274 142.484C94.0287 140.123 96.0819 137.914 99.4329 135.477C109.333 137.914 117.263 138.913 122.128 138.691C126.442 138.496 132.333 136.696 136.903 132.735C143.148 134.106 151.221 137.375 157.852 140.976C164.484 144.577 177.011 152.512 186.253 160.457" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M167.975 163.198C161.718 163.271 156.076 163.518 150.002 165.026" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M158.227 161.066C159.384 163.698 159.445 172.033 159.445 172.033" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M161.273 160.152C163.241 162.401 163.092 166.047 163.101 168.987" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M122.889 153.146C121.256 157.41 118.685 164.722 120.699 168.986C122.524 172.855 126.597 171.682 128.982 175.365C130.45 177.635 130.67 180.371 131.117 183" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M97.9092 142.788C101.275 146.998 107.304 153.539 112.836 153.603C118.627 153.67 120.58 148.287 124.108 144.433C126.115 147.574 128.823 152.454 133.262 150.41C137.195 148.598 139.702 141.938 139.644 137.911" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M99.4324 135.477C99.3928 124.077 99.0851 112.58 98.4728 101.099C93.62 100.824 86.8997 102.128 84.2007 97.0958C80.1399 89.5165 88.7824 87.4511 94.8172 87.2988C95.8834 80.5177 98.9937 74.6413 105.952 71.7747C117.238 67.126 130.465 72.981 141.167 76.073C145.335 77.2763 148.948 78.6289 155.055 81.2518C150.882 83.4878 132.379 89.2179 132.379 89.2179C132.379 89.2179 133.658 101.723 134.161 106.536C134.855 113.171 136.902 132.735 136.902 132.735" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M116.492 83.3848L117.406 86.4311" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M121.671 82.7754L122.585 85.5171" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M117.71 96.1787C119.285 98.4787 121.908 98.4208 124.717 97.7019" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M89.3398 93.9121C90.8965 94.0492 92.5476 94.4696 93.9855 94.7925" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M23.2744 97.7022C24.9986 84.801 26.6406 71.2113 29.7479 58.0815C31.6092 50.2068 33.5315 42.332 35.4903 34.4816C36.0112 32.3918 38.6554 19.7708 41.4854 21.6108C44.0779 23.2954 39.8405 36.1205 39.4079 38.7526C39.941 36.943 44.8851 16.7001 48.4828 18.8783C51.9557 20.9833 47.8309 36.7572 47.4105 39.9711C47.4075 37.8569 52.6837 10.7263 58.3103 16.2097C60.4153 18.2629 57.96 25.6228 57.3934 28.0081C56.0895 33.4824 54.4111 38.7587 52.5071 44.0075C53.7531 34.9629 62.8494 26.753 70.8673 34.8654C72.3539 36.3703 76.0187 42.9261 74.4651 45.1651C72.0584 48.6349 69.5726 43.1819 67.1417 41.0404C64.1471 38.4022 60.0863 41.8811 58.6119 44.8452C56.9517 48.184 56.6075 55.1236 57.759 58.7C59.4924 64.092 65.2255 64.2565 68.3724 60.0739C69.3624 58.7609 69.4569 56.8052 70.9496 56.1258C72.6708 55.3429 74.5747 55.7877 75.3089 57.7922C76.7254 61.6701 73.1551 66.8337 69.2771 70.0415C65.3991 73.2462 56.0256 74.0901 51.3647 70.9219C50.8926 77.9863 50.9687 85.0386 50.6945 92.0512C50.597 94.5462 50.4843 95.6337 47.6939 96.2338C44.4374 96.9345 40.206 97.5864 36.6813 98.0038C32.846 98.4546 24.4137 98.3572 23.2775 97.6991L23.2744 97.7022Z" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M25.7109 82.1655C29.6681 82.7139 33.3237 82.1077 37.287 81.87C42.2586 81.5715 46.0483 80.289 50.9955 79.4238" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M104.916 11.7955C102.981 8.47805 99.0668 4.40206 95.4721 3.5765C89.8973 2.29704 84.3957 5.84297 83.4361 11.3386C82.3516 17.547 83.9783 24.3007 85.2669 30.2746C86.1047 34.1647 88.7641 44.3913 88.7641 44.3913C88.7641 44.3913 70.937 48.0012 70.4922 52.0071C70.4922 54.1396 78.6198 52.1138 82.0683 51.7025C89.017 50.8739 96.9039 49.5366 103.85 48.3515C111.615 47.0264 119.029 45.2473 126.697 43.4774C132.473 42.1462 136.747 40.8819 142.386 39.0602C145.307 38.1159 153.727 35.4564 152.743 33.2722C151.759 31.088 143.44 33.5403 140.71 34.0338C135.848 34.9142 127.154 36.1662 127.154 36.1662C124.202 29.2876 122.49 21.425 118.813 14.5281C116.379 9.96161 112.769 1.59941 106.735 1.49888C103.895 1.45014 101.361 3.54301 99.5999 5.72419" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M90.8613 100.922C92.1743 104.425 94.2976 107.523 97.6699 109.656C97.9898 109.86 98.3614 109.869 98.6873 109.744C98.6873 106.862 98.6295 103.98 98.4741 101.099C96.1498 100.968 93.3959 101.196 90.8613 100.919V100.922Z" fill="#333333"/>
<path d="M128.855 66.8276C122.071 67.7994 115.39 65.2923 108.606 65.603C105.873 65.7279 102.824 66.1879 100.63 67.9578C99.0007 69.2708 98.1477 71.2174 98.3975 73.1792C95.9513 73.4138 93.6635 74.742 92.0428 76.6734C89.4961 79.7106 88.9204 83.8292 88.9082 87.6646C88.9082 87.8108 88.9082 87.957 88.9082 88.1032C90.7847 87.5914 92.8593 87.36 94.7023 87.3082C94.9308 88.2525 95.1836 89.1939 95.4273 90.123C96.1036 92.7032 96.9353 95.2225 98.2026 97.5774C98.6626 98.4303 99.8171 98.2993 100.308 97.5774C103.174 93.3582 106.312 88.8374 107.311 83.7318C107.692 81.7791 107.744 79.6253 106.805 77.8097C106.595 77.4014 106.339 77.042 106.056 76.7222C114.461 76.2469 122.674 73.6118 129.796 69.0575C131.027 68.2685 130.18 66.6418 128.858 66.8306L128.855 66.8276Z" fill="#333333"/>
<path d="M117.556 29.7018C117.556 29.7018 121.793 29.1839 123.804 28.9219" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M88.3135 40.8883C98.8203 38.305 109.629 35.8131 120.452 34.3387C121.942 34.1346 124.33 34.1864 125.631 33.4248" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M87.2471 36.7755C90.0802 35.2067 95.2742 33.8206 98.2169 33.123C101.735 32.2913 107.036 31.6272 111.941 30.6768" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                          </svg>
                           <h6 style="font-size: 12px;"> No Data Available </h6>
                        </span>
                      </div>
                      }
                      @case ("LogDetails") {
                      <ng-template mat-tab-label>
                        <span>{{detail.label}}</span>
                      </ng-template>




                      @if (expenseRequestData?.expenseRequestLog?.length > 0) {
                      <table class="  table mt-2   color-table mobile-card-view-table   ">
                        <thead>
                          <tr>
                            <th class="thd-w20"><span>Date </span></th>
                            <th class="thd-w15"><span>Status </span></th>
                            <th class="thd-w25"><span>Action By </span></th>
                            <th class="thd-w40"><span>Remarks</span></th>
                          </tr>
                        </thead>

                        <tbody>
                          @for (log of expenseRequestData?.expenseRequestLog; track $index) {
                          <tr>
                            <td data-label="Date"><span>{{log?.actionDatetimeString}}</span></td>
                            <td data-label="Status"><span class="status-blue status-common">
                                {{log?.actionStatus}}
                              </span>
                            </td>
                            <td data-label="Action By"> <span class="space-wrap"> {{log?.actionByName}} </span> </td>
                            <td data-label="Remarks">
                              <span> {{log?.actionRemarks}}</span>
                            </td>
                          </tr>
                          }

                        </tbody>
                      </table>

                      }

                      <div *ngIf="!(expenseRequestData?.expenseRequestLog?.length)">
                        <span class="text-center d-inline-block w-100 py-2">
                       <svg width="70" height="70" viewBox="0 0 188 184" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2.25436 142.788C1.72125 137.963 0.993173 132.495 3.32057 128.013C4.74626 125.269 6.72033 123.502 9.76362 122.344C11.5214 121.674 13.2212 121.007 15.8319 121.168C13.6842 116.041 11.5944 111.615 12.5388 105.848C13.4161 100.49 16.1274 94.3544 22.8842 94.0498" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M51.377 91.5703C55.3859 92.1156 57.8444 95.823 57.0676 100.846C56.376 105.321 55.4378 111.509 52.8697 115.262C53.6252 112.745 57.6676 111.003 59.5259 112.928C63.1023 116.636 57.7499 127.024 56.2085 130.594C56.4735 130.155 57.3387 129.713 57.7377 129.314C65.7526 135.812 57.8231 151.154 56.1628 158.852C58.4597 154.821 60.7109 155.428 62.4199 157.106C63.873 158.529 65.5089 161.246 65.9232 163.199C66.4441 165.66 67.2027 168.728 67.4464 171.272C67.5499 172.362 67.2027 174.632 66.6605 175.643C65.8837 177.093 64.202 176.642 63.48 175.384C62.2646 173.264 64.3818 168.697 65.3139 166.687C67.2392 162.519 70.2947 157.63 73.6914 154.517C77.347 151.166 82.2211 148.729 86.9064 153.1C88.0092 149.033 91.1194 144.04 92.274 142.484C94.0287 140.123 96.0819 137.914 99.4329 135.477C109.333 137.914 117.263 138.913 122.128 138.691C126.442 138.496 132.333 136.696 136.903 132.735C143.148 134.106 151.221 137.375 157.852 140.976C164.484 144.577 177.011 152.512 186.253 160.457" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M167.975 163.198C161.718 163.271 156.076 163.518 150.002 165.026" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M158.227 161.066C159.384 163.698 159.445 172.033 159.445 172.033" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M161.273 160.152C163.241 162.401 163.092 166.047 163.101 168.987" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M122.889 153.146C121.256 157.41 118.685 164.722 120.699 168.986C122.524 172.855 126.597 171.682 128.982 175.365C130.45 177.635 130.67 180.371 131.117 183" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M97.9092 142.788C101.275 146.998 107.304 153.539 112.836 153.603C118.627 153.67 120.58 148.287 124.108 144.433C126.115 147.574 128.823 152.454 133.262 150.41C137.195 148.598 139.702 141.938 139.644 137.911" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M99.4324 135.477C99.3928 124.077 99.0851 112.58 98.4728 101.099C93.62 100.824 86.8997 102.128 84.2007 97.0958C80.1399 89.5165 88.7824 87.4511 94.8172 87.2988C95.8834 80.5177 98.9937 74.6413 105.952 71.7747C117.238 67.126 130.465 72.981 141.167 76.073C145.335 77.2763 148.948 78.6289 155.055 81.2518C150.882 83.4878 132.379 89.2179 132.379 89.2179C132.379 89.2179 133.658 101.723 134.161 106.536C134.855 113.171 136.902 132.735 136.902 132.735" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M116.492 83.3848L117.406 86.4311" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M121.671 82.7754L122.585 85.5171" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M117.71 96.1787C119.285 98.4787 121.908 98.4208 124.717 97.7019" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M89.3398 93.9121C90.8965 94.0492 92.5476 94.4696 93.9855 94.7925" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M23.2744 97.7022C24.9986 84.801 26.6406 71.2113 29.7479 58.0815C31.6092 50.2068 33.5315 42.332 35.4903 34.4816C36.0112 32.3918 38.6554 19.7708 41.4854 21.6108C44.0779 23.2954 39.8405 36.1205 39.4079 38.7526C39.941 36.943 44.8851 16.7001 48.4828 18.8783C51.9557 20.9833 47.8309 36.7572 47.4105 39.9711C47.4075 37.8569 52.6837 10.7263 58.3103 16.2097C60.4153 18.2629 57.96 25.6228 57.3934 28.0081C56.0895 33.4824 54.4111 38.7587 52.5071 44.0075C53.7531 34.9629 62.8494 26.753 70.8673 34.8654C72.3539 36.3703 76.0187 42.9261 74.4651 45.1651C72.0584 48.6349 69.5726 43.1819 67.1417 41.0404C64.1471 38.4022 60.0863 41.8811 58.6119 44.8452C56.9517 48.184 56.6075 55.1236 57.759 58.7C59.4924 64.092 65.2255 64.2565 68.3724 60.0739C69.3624 58.7609 69.4569 56.8052 70.9496 56.1258C72.6708 55.3429 74.5747 55.7877 75.3089 57.7922C76.7254 61.6701 73.1551 66.8337 69.2771 70.0415C65.3991 73.2462 56.0256 74.0901 51.3647 70.9219C50.8926 77.9863 50.9687 85.0386 50.6945 92.0512C50.597 94.5462 50.4843 95.6337 47.6939 96.2338C44.4374 96.9345 40.206 97.5864 36.6813 98.0038C32.846 98.4546 24.4137 98.3572 23.2775 97.6991L23.2744 97.7022Z" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M25.7109 82.1655C29.6681 82.7139 33.3237 82.1077 37.287 81.87C42.2586 81.5715 46.0483 80.289 50.9955 79.4238" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M104.916 11.7955C102.981 8.47805 99.0668 4.40206 95.4721 3.5765C89.8973 2.29704 84.3957 5.84297 83.4361 11.3386C82.3516 17.547 83.9783 24.3007 85.2669 30.2746C86.1047 34.1647 88.7641 44.3913 88.7641 44.3913C88.7641 44.3913 70.937 48.0012 70.4922 52.0071C70.4922 54.1396 78.6198 52.1138 82.0683 51.7025C89.017 50.8739 96.9039 49.5366 103.85 48.3515C111.615 47.0264 119.029 45.2473 126.697 43.4774C132.473 42.1462 136.747 40.8819 142.386 39.0602C145.307 38.1159 153.727 35.4564 152.743 33.2722C151.759 31.088 143.44 33.5403 140.71 34.0338C135.848 34.9142 127.154 36.1662 127.154 36.1662C124.202 29.2876 122.49 21.425 118.813 14.5281C116.379 9.96161 112.769 1.59941 106.735 1.49888C103.895 1.45014 101.361 3.54301 99.5999 5.72419" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M90.8613 100.922C92.1743 104.425 94.2976 107.523 97.6699 109.656C97.9898 109.86 98.3614 109.869 98.6873 109.744C98.6873 106.862 98.6295 103.98 98.4741 101.099C96.1498 100.968 93.3959 101.196 90.8613 100.919V100.922Z" fill="#333333"/>
<path d="M128.855 66.8276C122.071 67.7994 115.39 65.2923 108.606 65.603C105.873 65.7279 102.824 66.1879 100.63 67.9578C99.0007 69.2708 98.1477 71.2174 98.3975 73.1792C95.9513 73.4138 93.6635 74.742 92.0428 76.6734C89.4961 79.7106 88.9204 83.8292 88.9082 87.6646C88.9082 87.8108 88.9082 87.957 88.9082 88.1032C90.7847 87.5914 92.8593 87.36 94.7023 87.3082C94.9308 88.2525 95.1836 89.1939 95.4273 90.123C96.1036 92.7032 96.9353 95.2225 98.2026 97.5774C98.6626 98.4303 99.8171 98.2993 100.308 97.5774C103.174 93.3582 106.312 88.8374 107.311 83.7318C107.692 81.7791 107.744 79.6253 106.805 77.8097C106.595 77.4014 106.339 77.042 106.056 76.7222C114.461 76.2469 122.674 73.6118 129.796 69.0575C131.027 68.2685 130.18 66.6418 128.858 66.8306L128.855 66.8276Z" fill="#333333"/>
<path d="M117.556 29.7018C117.556 29.7018 121.793 29.1839 123.804 28.9219" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M88.3135 40.8883C98.8203 38.305 109.629 35.8131 120.452 34.3387C121.942 34.1346 124.33 34.1864 125.631 33.4248" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M87.2471 36.7755C90.0802 35.2067 95.2742 33.8206 98.2169 33.123C101.735 32.2913 107.036 31.6272 111.941 30.6768" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>


                          <h6 style="font-size: 12px;"> No Data Available </h6>
                        </span>
                      </div>

                      }
                      }
                    </mat-tab>
                    }
                  </mat-tab-group>
                </div>
              </div>
            </div>
            <!-- left-container-wider -->
          </div>
          <!-- Bottom Sheet Template -->
          <ng-template #expenseSummarySheet>
            <div class="row-wrapper common-block">
              <div class="expense-drawer">
                <div class="exp-det">
                  <h6 class="text-dark">Expense Bill Details</h6>
                  <label>Total:</label> <span>{{ summaryComponent?.totalExpense || 0 | number:'1.2-2' }}</span>
                </div>
                <div class="exp-view">
                  <button id="viewDetailsBtn" (click)="closeExpenseSummarySheet()"> Close Details <i
                      class="fa fa-angle-down"></i></button>
                </div>
              </div>
              <!-- Summary -->
              <app-summary [summaries]="expenseSummary" [expenseRequestData]="expenseRequestData"></app-summary>
              @if (expenseConfig?.justification) {
              <div [formGroup]="justificationForm" class="row mt-3">
                <div class="col-md-12">
                  <div class="form-group chm-formgroup mb-2">
                    <label class="d-block">{{ expenseConfig.justification.label }}</label>
                    <textarea [formControlName]="expenseConfig.justification.controlName"
                      [attr.maxLength]="expenseConfig.justification.maxLength"
                      class="form-control chm-formtextarea max-tr-md mar-align-0" rows="3"></textarea>
                    @if (justificationForm.controls.justification?.invalid &&
                    justificationForm.controls.justification?.touched) {
                    <span class="validate-error-message">
                      Required
                    </span>
                    }
                  </div>
                </div>
              </div>
              }
              @if (expenseConfig?.actions) {
              <div
                class="bottom-buttons d-lg-flex d-md-flex  pe-lg-3  pe-md-3  justify-content-lg-end  justify-content-md-end   align-items-center    ">
                <div class="d-flex align-items-center me-lg-2 combine-btn ">
                  @if (expenseConfig.actions.draft) {
                  @if(expenseRequestPreviewData?.claimStatusId == 26 || !editMode) {
                  <button type="button" [ngClass]="expenseConfig.actions.draft.class"
                    (click)="onAction(expenseConfig.actions.draft.type)">
                    {{ expenseConfig.actions.draft.label }}
                  </button>
                  }
                  }
                  @if (expenseConfig.actions.cancel) {
                  <button class="me-1" type="button" [ngClass]="expenseConfig.actions.cancel.class"
                    (click)="onAction(expenseConfig.actions.cancel.type);">
                    {{ expenseConfig.actions.cancel.label }}
                  </button>
                  }
                  @if (expenseConfig.actions.submit) {
                  <button type="button"
                    [ngClass]="enableSubmitButton ? expenseConfig.actions.submit.enableClass : expenseConfig.actions.submit.disableClass"
                    (click)="onAction(expenseConfig.actions.submit.type)">
                    {{ expenseConfig.actions.submit.label }}
                  </button>
                  }
                </div>
              </div>
              }
            </div>
          </ng-template>
          <div class="expense-drawer-bottom  d-block d-md-none d-lg-none">
            <div class="expense-drawer">
              <div class="exp-det">
                <h6 class="text-dark">Expense Bill Details</h6>
                <label>Total:</label> <span>{{ summaryComponent?.totalExpense || 0 | number:'1.2-2' }}</span>
              </div>
              <div class="exp-view">
                <button id="viewDetailsBtn" (click)="openExpenseSummarySheet(expenseSummarySheet)"> View Details <i
                    class="fa fa-angle-up"></i></button>
              </div>
            </div>
          </div>
          <!-- Sidebar: Only show on desktop/tablet -->
          <div class="right-container-nrw rt-aside-fixed d-none d-md-block d-lg-block">
            <div class="right-container-scroll">
              <ng-container *ngTemplateOutlet="expenseSummarySheet"></ng-container>
            </div>
          </div>
        </div>
        <!-- all-data-wrapper -->
      </div>
    </div>
  </div>

  <!-- <pre>{{mainExpenseData | json}}</pre> -->
  <ng-template #requestBottomSheet>
    <div class="bottom-sheet-select">
      <span class="select-mobile-line"></span>
      <ul class="list-group">
        <li class="list-group-item" *ngFor="let req of travelRequests; trackBy: trackByReq"
          (click)="selectRequestFromSheet(req)">
          {{req.label}}
        </li>
      </ul>
    </div>
  </ng-template>