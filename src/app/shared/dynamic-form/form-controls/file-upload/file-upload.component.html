<div [ngClass]="controlConfig.blockClass ? controlConfig.blockClass : 'col-md-12'">
 <label style="font-size: 11px !important;color: #8F90A6 !important;text-transform: uppercase;" class="common-title fs-6 fw-bold mb-1"> {{ controlConfig.label }}
    @if (controlConfig.required) {
    <span class="required-star">*</span>
    }
  </label>
  <div class="upload-container excel-TBL-hold">
    <div class="upload-ico">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M8.00078 0.800198L11.9008 4.4002M8.00078 0.800198L4.40078 4.4002M8.00078 0.800198L8.00078 12.2002M15.2008 7.4002L15.2008 13.2002C15.2008 14.3048 14.3053 15.2002 13.2008 15.2002L2.80078 15.2002C1.69621 15.2002 0.800781 14.3048 0.800781 13.2002L0.800781 7.4002"
          stroke="#2A5EE3" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </div>
    <label for="{{ controlConfig.name }}" class="custom-upload w-100" (click)="onMobileUploadClick($event)">Click to
      Choose
      File</label>
    <input type="file" [id]="controlConfig.name" [multiple]="controlConfig.multiple" (change)="onFileSelected($event)"
      [accept]="controlConfig.accept" [disabled]="controlConfig.disable" class="d-none d-md-block d-lg-block" />
    <small> (PDF, .xlsx, .docx, (max upload 5MB)) </small>
  </div>
  <!-- Table to Display Selected Files -->
  @if (selectedFiles?.length > 0) {
  <table id="tblLtcDocument"
    class="table mt-2 grey-table attached-doc-table d-table table-cust tbl-sml no-sorting td-firstdata-center vioColor tblTeFile">
    <thead>
      <tr>
        <th class="thd-w15"><span>Sl No</span></th>
        <th class="thd-w50"><span>Document</span></th>
        @if (form.value?.DocumentType) {
          <th class="thd-w15"><span>Document Type</span></th>
        }
        <th class="thd-w15"><span>Action</span></th>
      </tr>
    </thead>
    <tbody>
      @for (file of selectedFiles; track file; let i = $index) {
      <tr>
     <td>{{ i + 1 }}</td>
        <td class="filename-width"  > <label>Document Name</label> {{ file?.FileName }}</td>
        @if (form.value?.DocumentType) {
          <td class="text-lg-start">
            <label>Document Type</label> {{ file?.DocumentTypeName }}
          </td>
        }
        <td data-label="" class="text-lg-start">
          <!-- Preview Action -->
          <a class="me-2" title="Preview" (click)="previewFile(file)">
            <svg width="18" height="13" viewBox="0 0 18 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                              <path fill-rule="evenodd" clip-rule="evenodd" d="M2.57849 7.02655C2.44283 6.81649 2.33553 6.63693 2.25748 6.50085C2.33553 6.36478 2.44283 6.18522 2.57849 5.97516C2.89899 5.4789 3.37372 4.81878 3.99035 4.16104C5.235 2.83342 6.98374 1.59131 9.15541 1.59131C11.3271 1.59131 13.0758 2.83342 14.3205 4.16104C14.9371 4.81878 15.4118 5.4789 15.7323 5.97516C15.868 6.18522 15.9753 6.36477 16.0533 6.50085C15.9753 6.63693 15.868 6.81649 15.7323 7.02655C15.4118 7.52281 14.9371 8.18293 14.3205 8.84066C13.0758 10.1683 11.3271 11.4104 9.15541 11.4104C6.98374 11.4104 5.235 10.1683 3.99035 8.84066C3.37372 8.18293 2.89899 7.52281 2.57849 7.02655ZM17.3242 6.2209C17.3243 6.22113 17.3244 6.22135 16.7654 6.50085C17.3244 6.78036 17.3243 6.78057 17.3242 6.78081L17.3239 6.78138L17.3232 6.78291L17.3208 6.78747L17.3132 6.8025C17.3067 6.8151 17.2975 6.83283 17.2856 6.85533C17.2618 6.90034 17.2271 6.9645 17.1818 7.04508C17.0912 7.20616 16.9576 7.43337 16.7824 7.70471C16.4327 8.24617 15.9129 8.96969 15.2324 9.69559C13.8827 11.1352 11.8265 12.6604 9.15541 12.6604C6.48436 12.6604 4.4281 11.1352 3.07843 9.69559C2.39789 8.96969 1.87814 8.24617 1.52844 7.70471C1.3532 7.43337 1.21965 7.20616 1.12904 7.04508C1.08371 6.9645 1.04906 6.90034 1.02525 6.85533C1.01334 6.83283 1.00413 6.8151 0.997652 6.8025L0.989974 6.78747L0.987671 6.78291L0.986904 6.78138L0.986616 6.78081C0.9865 6.78057 0.986393 6.78036 1.54541 6.50085C0.986393 6.22135 0.9865 6.22113 0.986616 6.2209L0.986904 6.22033L0.987671 6.2188L0.989974 6.21424L0.997652 6.19921C1.00413 6.18661 1.01334 6.16888 1.02525 6.14637C1.04906 6.10137 1.08371 6.03721 1.12904 5.95663C1.21965 5.79554 1.3532 5.56834 1.52844 5.297C1.87814 4.75554 2.39789 4.03202 3.07843 3.30612C4.4281 1.86647 6.48436 0.341309 9.15541 0.341309C11.8265 0.341309 13.8827 1.86647 15.2324 3.30612C15.9129 4.03202 16.4327 4.75554 16.7824 5.297C16.9576 5.56834 17.0912 5.79554 17.1818 5.95663C17.2271 6.03721 17.2618 6.10137 17.2856 6.14637C17.2975 6.16888 17.3067 6.18661 17.3132 6.19921L17.3208 6.21424L17.3232 6.2188L17.3239 6.22033L17.3242 6.2209ZM16.7654 6.50085L17.3244 6.22135C17.4124 6.3973 17.4124 6.60441 17.3244 6.78036L16.7654 6.50085ZM0.986393 6.22135L1.54541 6.50085L0.986393 6.78036C0.898416 6.60441 0.898416 6.3973 0.986393 6.22135ZM7.70496 6.50079C7.70496 5.69973 8.35435 5.05034 9.15542 5.05034C9.95648 5.05034 10.6059 5.69973 10.6059 6.50079C10.6059 7.30186 9.95648 7.95125 9.15542 7.95125C8.35435 7.95125 7.70496 7.30186 7.70496 6.50079ZM9.15542 3.80034C7.664 3.80034 6.45496 5.00937 6.45496 6.50079C6.45496 7.99221 7.664 9.20125 9.15542 9.20125C10.6468 9.20125 11.8559 7.99221 11.8559 6.50079C11.8559 5.00937 10.6468 3.80034 9.15542 3.80034Z" fill="#031842"/>
                                                                           </svg>
          </a>
          <!-- Download Action -->
          <a class="me-2" title="Download" (click)="downloadFile(file)">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                              <path d="M7.9999 11.2002L4.53324 8.00023M7.9999 11.2002L11.1999 8.00023M7.9999 11.2002L7.9999 1.06689M14.3999 7.46689L14.3999 14.4002L1.5999 14.4002L1.5999 7.46689" stroke="#031842" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                                           </svg>
          </a>
          <!-- Delete Action -->
          <a title="Delete" (click)="removeFile(i)">
                  <svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                              <path fill-rule="evenodd" clip-rule="evenodd" d="M5.16567 2.16596C5.29851 2.03312 5.47867 1.9585 5.66654 1.9585H8.3332C8.52106 1.9585 8.70123 2.03312 8.83407 2.16596C8.96691 2.2988 9.04154 2.47897 9.04154 2.66683V3.37515H4.9582V2.66683C4.9582 2.47897 5.03283 2.2988 5.16567 2.16596ZM3.7082 3.37515V2.66683C3.7082 2.14745 3.91453 1.64934 4.28179 1.28208C4.64904 0.91482 5.14715 0.708496 5.66654 0.708496H8.3332C8.85259 0.708496 9.3507 0.91482 9.71795 1.28208C10.0852 1.64934 10.2915 2.14745 10.2915 2.66683V3.37515H13C13.3452 3.37515 13.625 3.65497 13.625 4.00015C13.625 4.34532 13.3452 4.62515 13 4.62515H12.2915V13.3335C12.2915 13.8529 12.0852 14.351 11.718 14.7182C11.3507 15.0855 10.8526 15.2918 10.3332 15.2918H3.66654C3.14715 15.2918 2.64904 15.0855 2.28179 14.7182C1.91453 14.351 1.7082 13.8529 1.7082 13.3335V4.62515H1C0.654822 4.62515 0.375 4.34532 0.375 4.00015C0.375 3.65497 0.654822 3.37515 1 3.37515H2.33333H3.7082ZM4.3332 4.62516H9.66654H11.0415V13.3335C11.0415 13.5214 10.9669 13.7015 10.8341 13.8344C10.7012 13.9672 10.5211 14.0418 10.3332 14.0418H3.66654C3.47867 14.0418 3.29851 13.9672 3.16567 13.8344C3.03283 13.7015 2.9582 13.5214 2.9582 13.3335V4.62516H4.3332ZM5.6668 6.7085C6.01197 6.7085 6.2918 6.98832 6.2918 7.3335V11.3335C6.2918 11.6787 6.01197 11.9585 5.6668 11.9585C5.32162 11.9585 5.0418 11.6787 5.0418 11.3335V7.3335C5.0418 6.98832 5.32162 6.7085 5.6668 6.7085ZM8.9582 7.3335C8.9582 6.98832 8.67838 6.7085 8.3332 6.7085C7.98803 6.7085 7.7082 6.98832 7.7082 7.3335V11.3335C7.7082 11.6787 7.98803 11.9585 8.3332 11.9585C8.67838 11.9585 8.9582 11.6787 8.9582 11.3335V7.3335Z" fill="#E53535"/>
                                                                           </svg>
          </a>
        </td>
      </tr>
      }
    </tbody>
  </table>
  }
  <!-- Validation Message -->
  @if (control.invalid && control.touched) {
  <div class="text-danger">
    {{ getErrorMessage | fnWrap : control.invalid && control.touched }}
  </div>
  }
</div>
<!-- Mobile upload UI as bottom sheet -->
<ng-template #uploadMobileSheet>
  <div class="ticketbill-mobile">
    <h5 style="border-top-left-radius: 20px;border-top-right-radius:20px;"
      class="text-dark bg-white mb-0 fs-6 fw-bold pt-4  pb-3 px-3 position-relative">
      <div class="text-center"> <span class="ticketbill-mobile-line"></span></div>
      Upload File
      <button type="button" id="close-upload-mobile" class="btn-close position-absolute top-0 end-0 m-3"
        aria-label="Close" (click)="closeMobileUploadModal()"></button>
    </h5>
    <div class="bg-white hide-scrollbar px-3 py-0 pb-3">
      <ul class="upload-gallery ps-0 list-unstyled mb-3">
        <li>
          <input type="file" id="galleryInput" accept="image/*" (change)="onFileSelected($event)" style="display:none;">
          <label data-target="galleryInput" class="button-label" (click)="triggerInput('galleryInput')">
            <div class="upload-gallery-ico">
              <svg width="21" height="18" viewBox="0 0 21 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M0 2.10082C0 0.864789 1.11597 0 2.31165 0H17.9373C19.133 0 20.249 0.864786 20.249 2.10082V15.7733C20.249 17.0093 19.133 17.8741 17.9373 17.8741H2.31165C1.11597 17.8741 0 17.0093 0 15.7733V2.10082ZM2.31165 1.25C1.64432 1.25 1.25 1.70671 1.25 2.10082V13.7764L3.71189 10.9042L4.07231 10.4837L4.53311 10.7909L7.64572 12.866L12.6276 7.33053L13.0478 6.86364L13.5126 7.28617L18.999 12.2738V2.10082C18.999 1.70671 18.6046 1.25 17.9373 1.25H2.31165ZM1.25 15.7733V15.6971L4.30054 12.1382L7.40204 14.2058L7.85174 14.5056L8.21329 14.1039L13.1365 8.63362L18.999 13.9631V15.7733C18.999 16.1674 18.6046 16.6241 17.9373 16.6241H2.31165C1.64432 16.6241 1.25 16.1674 1.25 15.7733ZM8.87324 5.37363C8.87324 5.99488 8.36962 6.4985 7.74837 6.4985C7.12712 6.4985 6.6235 5.99488 6.6235 5.37363C6.6235 4.75238 7.12712 4.24876 7.74837 4.24876C8.36962 4.24876 8.87324 4.75238 8.87324 5.37363ZM10.1232 5.37363C10.1232 6.68524 9.05998 7.7485 7.74837 7.7485C6.43677 7.7485 5.3735 6.68524 5.3735 5.37363C5.3735 4.06203 6.43677 2.99876 7.74837 2.99876C9.05998 2.99876 10.1232 4.06203 10.1232 5.37363Z"
                  fill="white" />
              </svg>
            </div>
            Gallery
          </label>
          <input type="file" id="cameraInput" accept="image/*" capture="environment" (change)="onFileSelected($event)"
            style="display:none;">
          <label data-target="cameraInput" class="button-label" (click)="triggerInput('cameraInput')">
            <div class="upload-gallery-ico">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M1.66675 7C1.66675 5.89543 2.56218 5 3.66675 5H4.76305C5.43175 5 6.05622 4.6658 6.42715 4.1094L6.90635 3.3906C7.27728 2.8342 7.90174 2.5 8.57045 2.5H11.4297C12.0984 2.5 12.7229 2.8342 13.0938 3.3906L13.573 4.1094C13.9439 4.6658 14.5684 5 15.2371 5H16.3334C17.438 5 18.3334 5.89543 18.3334 7V15.5C18.3334 16.6046 17.438 17.5 16.3334 17.5H3.66675C2.56218 17.5 1.66675 16.6046 1.66675 15.5V7Z"
                  stroke="white" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" />
                <ellipse cx="10.0001" cy="10.8333" rx="3.33333" ry="3.33333" stroke="white" stroke-width="1.25"
                  stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </div>
            Camera
          </label>
          <input type="file" id="documentInput" accept=".pdf,.doc,.docx" (change)="onFileSelected($event)"
            style="display:none;">
          <label data-target="documentInput" class="button-label" (click)="triggerInput('documentInput')">
            <div class="upload-gallery-ico">
              <svg width="22" height="21" viewBox="0 0 22 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M12.499 1.75H5.49902C5.03489 1.75 4.58978 1.93437 4.26159 2.26256C3.9334 2.59075 3.74902 3.03587 3.74902 3.5V17.5C3.74902 17.9641 3.9334 18.4092 4.26159 18.7374C4.58978 19.0656 5.03489 19.25 5.49902 19.25H15.999C16.4632 19.25 16.9083 19.0656 17.2365 18.7374C17.5647 18.4092 17.749 17.9641 17.749 17.5V7L12.499 1.75Z"
                  stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M12.499 1.75V7H17.749" stroke="white" stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round" />
                <path d="M14.249 11.375H7.24902" stroke="white" stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round" />
                <path d="M14.249 14.875H7.24902" stroke="white" stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round" />
                <path d="M8.99902 7.875H8.12402H7.24902" stroke="white" stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
            </div>
            Document
          </label>
        </li>
      </ul>
      <p>You will be asked for access to your camera, gallery & files to continue</p>
    </div>
  </div>
</ng-template>
<div class="modal fade" id="fileaccess" tabindex="-1" aria-labelledby="fileaccess" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body">
        <div class="row">
          <div class="col-lg-12">
            <h5 class="fw-bold">Spend Mantra would like to access your files.</h5>
            <p>This allows you to upload your document and photos</p>
          </div>
        </div>
      </div>
      <div class="modal-footer button-half">
        <button type="button" data-bs-dismiss="modal" class="btn btn-outline-secondary">Don't Allow</button>
        <button type="button" id="allowButton" class="btn btn-dark me-md-1">Allow</button>
      </div>
    </div>
  </div>
</div>